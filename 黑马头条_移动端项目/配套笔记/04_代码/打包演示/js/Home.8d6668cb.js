(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Home"],{"159b":function(e,t,n){var r=n("da84"),a=n("fdbc"),i=n("17c2"),c=n("9112");for(var o in a){var s=r[o],u=s&&s.prototype;if(u&&u.forEach!==i)try{c(u,"forEach",i)}catch(l){u.forEach=i}}},"16c0":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("van-nav-bar",{attrs:{fixed:""},scopedSlots:e._u([{key:"left",fn:function(){return[n("img",{staticClass:"logo",attrs:{src:e.imgObj}})]},proxy:!0},{key:"right",fn:function(){return[n("van-icon",{attrs:{name:"search",size:"0.48rem",color:"#fff"},on:{click:function(t){return e.$router.push("/search")}}})]},proxy:!0}])}),n("van-tabs",{attrs:{animated:"",sticky:"","offset-top":"1.226667rem","before-change":e.tabsBeforeChangeFn},on:{change:e.tabsChangeFn},model:{value:e.channelId,callback:function(t){e.channelId=t},expression:"channelId"}},e._l(e.channelList,(function(t){return n("van-tab",{key:t.id,attrs:{title:t.name,name:t.id}},[n("article-list",{attrs:{cid:e.channelId}})],1)})),1),n("van-icon",{staticClass:"moreChannels",attrs:{name:"plus",size:"0.37333334rem"},on:{click:function(t){e.show=!0}}}),n("van-popup",{staticClass:"edit_wrap",on:{closed:e.onPopupClosed},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[n("channel-edit",{ref:"channelEdit",attrs:{userChannelList:e.channelList},on:{close:function(t){e.show=!1},addChannel:e.addChannelFn,removeChannel:e.removeChannelFn,changeChannel:e.channgeChannelFn}})],1)],1)},a=[],i=n("5530"),c=n("1da1"),o=(n("d81d"),n("c740"),n("b0c0"),n("a434"),n("159b"),n("96cf"),n("9e81")),s=n.n(o),u=n("365c"),l=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("van-pull-refresh",{on:{refresh:e.onRefresh},model:{value:e.isLoading,callback:function(t){e.isLoading=t},expression:"isLoading"}},[n("van-list",{attrs:{finished:e.finished,"finished-text":"没有更多了",offset:"50","immediate-check":!1},on:{load:e.onLoad},model:{value:e.loading,callback:function(t){e.loading=t},expression:"loading"}},e._l(e.articleList,(function(t){return n("article-item",{key:t.art_id,attrs:{obj:t},on:{dislike:e.dislikeFn,reports:e.reportsFn},nativeOn:{click:function(n){return e.$router.push("/article_detail?aid="+t.art_id)}}})})),1)],1)],1)},f=[],d=(n("9889"),n("f564")),h=n("2909"),p=(n("a9e3"),n("99af"),n("d10e")),m=n("c466"),b={data:function(){return{articleList:[],loading:!1,finished:!1,nextTime:null,isLoading:!1}},props:{cid:Number},methods:{timeAgo:m["a"],onLoad:function(){this.articleList.length>0&&this.getArticleList()},getArticleList:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(u["g"])({channelId:e.cid,timestamp:e.nextTime});case 2:n=t.sent,console.log(n),n.data.data.results.forEach((function(t){t.pubdate=e.timeAgo(t.pubdate)})),0===n.data.data.results.length?e.finished=!0:(e.nextTime=n.data.data.pre_timestamp,e.articleList=[].concat(Object(h["a"])(e.articleList),Object(h["a"])(n.data.data.results)),e.loading=!1,e.isLoading=!1);case 6:case"end":return t.stop()}}),t)})))()},onRefresh:function(){this.nextTime=null,this.articleList=[],this.getArticleList()},dislikeFn:function(e){return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(u["d"])({target:e.art_id});case 3:Object(d["a"])({type:"success",message:"反馈成功"}),t.next=9;break;case 6:t.prev=6,t.t0=t["catch"](0),Object(d["a"])({type:"warning",message:"反馈失败-联系程序员"});case 9:case"end":return t.stop()}}),t,null,[[0,6]])})))()},reportsFn:function(e,t){return Object(c["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Object(u["f"])({target:e.art_id,type:t,remark:"就是其他问题"});case 3:Object(d["a"])({type:"success",message:"举报成功"}),n.next=9;break;case 6:n.prev=6,n.t0=n["catch"](0),Object(d["a"])({type:"warning",message:"举报失败"});case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))()}},created:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.getArticleList();case 1:case"end":return t.stop()}}),t)})))()},components:{ArticleItem:p["a"]}},v=b,g=n("2877"),w=Object(g["a"])(v,l,f,!1,null,null,null),y=w.exports,O=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("van-nav-bar",{attrs:{title:"频道管理"},scopedSlots:e._u([{key:"right",fn:function(){return[n("van-icon",{attrs:{name:"cross",size:"0.37333334rem",color:"white"},on:{click:function(t){return e.$emit("close")}}})]},proxy:!0}])}),n("div",{staticClass:"my-channel-box"},[n("div",{staticClass:"channel-title"},[n("span",[e._v("我的频道 "),n("span",{staticClass:"small-title"},[e._v(" "+e._s(e.isEdit?"点击删除频道":"点击进入频道")+" ")])]),n("span",{on:{click:function(t){e.isEdit=!e.isEdit}}},[e._v(e._s(e.isEdit?"完成":"编辑"))])]),n("van-row",{attrs:{type:"flex"}},e._l(e.userChannelList,(function(t){return n("van-col",{key:t.id,attrs:{span:"6"},on:{click:function(n){return e.removeFn(t)}}},[n("div",{staticClass:"channel-item van-hairline--surround"},[e._v(" "+e._s(t.name)+" "),e.isEdit&&"推荐"!==t.name?n("van-badge",{staticClass:"cross-badge",attrs:{color:"transparent"},scopedSlots:e._u([{key:"content",fn:function(){return[n("van-icon",{staticClass:"badge-icon",attrs:{name:"cross",color:"#cfcfcf",size:"0.32rem"}})]},proxy:!0}],null,!0)}):e._e()],1)])})),1)],1),n("div",{staticClass:"more-channel-box"},[e._m(0),n("van-row",{attrs:{type:"flex"}},e._l(e.unChannelList,(function(t){return n("van-col",{key:t.id,attrs:{span:"6"},on:{click:function(n){return e.addFn(t)}}},[n("div",{staticClass:"channel-item van-hairline--surround"},[e._v(e._s(t.name))])])})),1)],1)],1)},x=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"channel-title"},[n("span",[e._v("点击添加更多频道：")])])}],C=(n("4de4"),{props:{userChannelList:{type:Array,default:function(){return[]}}},data:function(){return{allChannelList:[],isEdit:!1}},methods:{addFn:function(e){!0===this.isEdit&&this.$emit("addChannel",e)},removeFn:function(e){!0===this.isEdit&&"推荐"!==e.name?this.$emit("removeChannel",e):(this.$emit("changeChannel",e),this.$emit("close"))}},computed:{unChannelList:function(){var e=this;return this.allChannelList.filter((function(t){var n=e.userChannelList.findIndex((function(e){return e.id===t.id}));if(-1===n)return!0}))}},created:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(u["a"])();case 2:n=t.sent,console.log(n),e.allChannelList=n.data.data.channels;case 5:case"end":return t.stop()}}),t)})))()}}),j=C,k=(n("8552"),Object(g["a"])(j,O,x,!1,null,"869537a6",null)),_=k.exports,E={},L={name:"Home",data:function(){return{imgObj:s.a,channelId:0,channelList:[],show:!1}},methods:{addChannelFn:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:t.channelList.push(e),t.updateChannel();case 2:case"end":return n.stop()}}),n)})))()},updateChannel:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.channelList.map((function(e){var t=Object(i["a"])({},e);return t})),r=n.findIndex((function(e){return"推荐"===e.name})),n.splice(r,1),n.forEach((function(e,t){delete e.name,e.seq=t+1})),t.next=6,Object(u["s"])({channels:n});case 6:case"end":return t.stop()}}),t)})))()},removeChannelFn:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:r=t.channelList.findIndex((function(t){return t.id===e.id})),t.channelList.splice(r,1),t.updateChannel();case 3:case"end":return n.stop()}}),n)})))()},onPopupClosed:function(){this.$refs.channelEdit.isEdit=!1},channgeChannelFn:function(e){this.channelId=e.id},tabsBeforeChangeFn:function(){return E[this.channelId]=window.scrollY,!0},tabsChangeFn:function(e){this.$nextTick((function(){window.scrollTo(0,E[e]||0)}))}},beforeRouteLeave:function(e,t,n){t.meta.top=window.scrollY,n()},created:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(u["v"])();case 2:n=t.sent,e.channelList=n.data.data.channels;case 4:case"end":return t.stop()}}),t)})))()},components:{ArticleList:y,ChannelEdit:_}},I=L,N=(n("d60c"),Object(g["a"])(I,r,a,!1,null,"55b95093",null));t["default"]=N.exports},"17c2":function(e,t,n){"use strict";var r=n("b727").forEach,a=n("a640"),i=a("forEach");e.exports=i?[].forEach:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}},3598:function(e,t,n){},"4d84":function(e,t,n){},"4de4":function(e,t,n){"use strict";var r=n("23e7"),a=n("b727").filter,i=n("1dde"),c=i("filter");r({target:"Array",proto:!0,forced:!c},{filter:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}})},"54a2":function(e,t,n){"use strict";n("4d84")},5530:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));n("b64b"),n("a4d3"),n("4de4"),n("e439"),n("159b"),n("dbb4");function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}},5899:function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(e,t,n){var r=n("1d80"),a=n("5899"),i="["+a+"]",c=RegExp("^"+i+i+"*"),o=RegExp(i+i+"*$"),s=function(e){return function(t){var n=String(r(t));return 1&e&&(n=n.replace(c,"")),2&e&&(n=n.replace(o,"")),n}};e.exports={start:s(1),end:s(2),trim:s(3)}},7156:function(e,t,n){var r=n("861d"),a=n("d2bb");e.exports=function(e,t,n){var i,c;return a&&"function"==typeof(i=t.constructor)&&i!==n&&r(c=i.prototype)&&c!==n.prototype&&a(e,c),e}},"7cf4":function(e,t,n){},8552:function(e,t,n){"use strict";n("c8b7")},9889:function(e,t,n){"use strict";n("3cd0"),n("1812"),n("1a44"),n("acc2"),n("5e5e"),n("7cf4")},"9e81":function(e,t,n){e.exports=n.p+"img/toutiao_logo.4653c8be.png"},a434:function(e,t,n){"use strict";var r=n("23e7"),a=n("23cb"),i=n("a691"),c=n("50c4"),o=n("7b0b"),s=n("65f0"),u=n("8418"),l=n("1dde"),f=l("splice"),d=Math.max,h=Math.min,p=9007199254740991,m="Maximum allowed length exceeded";r({target:"Array",proto:!0,forced:!f},{splice:function(e,t){var n,r,l,f,b,v,g=o(this),w=c(g.length),y=a(e,w),O=arguments.length;if(0===O?n=r=0:1===O?(n=0,r=w-y):(n=O-2,r=h(d(i(t),0),w-y)),w+n-r>p)throw TypeError(m);for(l=s(g,r),f=0;f<r;f++)b=y+f,b in g&&u(l,f,g[b]);if(l.length=r,n<r){for(f=y;f<w-r;f++)b=f+r,v=f+n,b in g?g[v]=g[b]:delete g[v];for(f=w;f>w-r+n;f--)delete g[f-1]}else if(n>r)for(f=w-r;f>y;f--)b=f+r-1,v=f+n-1,b in g?g[v]=g[b]:delete g[v];for(f=0;f<n;f++)g[f+y]=arguments[f+2];return g.length=w-r+n,l}})},a640:function(e,t,n){"use strict";var r=n("d039");e.exports=function(e,t){var n=[][e];return!!n&&r((function(){n.call(null,t||function(){throw 1},1)}))}},a9e3:function(e,t,n){"use strict";var r=n("83ab"),a=n("da84"),i=n("94ca"),c=n("6eeb"),o=n("5135"),s=n("c6b6"),u=n("7156"),l=n("c04e"),f=n("d039"),d=n("7c73"),h=n("241c").f,p=n("06cf").f,m=n("9bf2").f,b=n("58a8").trim,v="Number",g=a[v],w=g.prototype,y=s(d(w))==v,O=function(e){var t,n,r,a,i,c,o,s,u=l(e,!1);if("string"==typeof u&&u.length>2)if(u=b(u),t=u.charCodeAt(0),43===t||45===t){if(n=u.charCodeAt(2),88===n||120===n)return NaN}else if(48===t){switch(u.charCodeAt(1)){case 66:case 98:r=2,a=49;break;case 79:case 111:r=8,a=55;break;default:return+u}for(i=u.slice(2),c=i.length,o=0;o<c;o++)if(s=i.charCodeAt(o),s<48||s>a)return NaN;return parseInt(i,r)}return+u};if(i(v,!g(" 0o1")||!g("0b1")||g("+0x1"))){for(var x,C=function(e){var t=arguments.length<1?0:e,n=this;return n instanceof C&&(y?f((function(){w.valueOf.call(n)})):s(n)!=v)?u(new g(O(t)),n,C):O(t)},j=r?h(g):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),k=0;j.length>k;k++)o(g,x=j[k])&&!o(C,x)&&m(C,x,p(g,x));C.prototype=w,w.constructor=C,c(a,v,C)}},b64b:function(e,t,n){var r=n("23e7"),a=n("7b0b"),i=n("df75"),c=n("d039"),o=c((function(){i(1)}));r({target:"Object",stat:!0,forced:o},{keys:function(e){return i(a(e))}})},c740:function(e,t,n){"use strict";var r=n("23e7"),a=n("b727").findIndex,i=n("44d2"),c="findIndex",o=!0;c in[]&&Array(1)[c]((function(){o=!1})),r({target:"Array",proto:!0,forced:o},{findIndex:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}}),i(c)},c8b7:function(e,t,n){},d10e:function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("van-cell",{scopedSlots:e._u([{key:"title",fn:function(){return[n("div",{staticClass:"title-box"},[n("span",[e._v(e._s(e.obj.title))]),1===e.obj.cover.type?n("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.obj.cover.images[0],expression:"obj.cover.images[0]"}],staticClass:"thumb"}):e._e()]),e.obj.cover.type>1?n("div",{staticClass:"thumb-box"},e._l(e.obj.cover.images,(function(e,t){return n("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e,expression:"imgUrl"}],key:t,staticClass:"thumb"})})),0):e._e()]},proxy:!0},{key:"label",fn:function(){return[n("div",{staticClass:"label-box"},[n("div",[n("span",[e._v(e._s(e.obj.aut_name))]),n("span",[e._v(e._s(e.obj.comm_count)+" 评论")]),n("span",[e._v(e._s(e.obj.pubdate))])]),e.showX?n("van-icon",{attrs:{name:"cross"},on:{click:function(t){return t.stopPropagation(),e.onCloseClick.apply(null,arguments)}}}):e._e()],1)]},proxy:!0}])}),n("van-action-sheet",{attrs:{actions:e.actions,"get-container":"body","cancel-text":e.cancelText},on:{select:e.onSelect,cancel:e.onCancel},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}})],1)},a=[],i=(n("b0c0"),n("365c")),c={data:function(){return{show:!1,actions:i["k"],cancelText:"取消"}},props:{obj:{type:Object,default:function(){return{}}},showX:{type:Boolean,default:!0}},methods:{onSelect:function(e){"反馈垃圾内容"===e.name?(this.actions=i["o"],this.cancelText="返回"):"不感兴趣"===e.name?(this.$emit("dislike",this.obj),this.show=!1):(this.$emit("reports",this.obj,e.value),this.actions=i["k"],this.show=!1)},onCloseClick:function(){this.show=!0},onCancel:function(){"返回"===this.cancelText&&(this.actions=i["k"],this.cancelText="取消",this.show=!0)}}},o=c,s=(n("54a2"),n("2877")),u=Object(s["a"])(o,r,a,!1,null,"78b9e07f",null);t["a"]=u.exports},d60c:function(e,t,n){"use strict";n("3598")},d81d:function(e,t,n){"use strict";var r=n("23e7"),a=n("b727").map,i=n("1dde"),c=i("map");r({target:"Array",proto:!0,forced:!c},{map:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}})},dbb4:function(e,t,n){var r=n("23e7"),a=n("83ab"),i=n("56ef"),c=n("fc6a"),o=n("06cf"),s=n("8418");r({target:"Object",stat:!0,sham:!a},{getOwnPropertyDescriptors:function(e){var t,n,r=c(e),a=o.f,u=i(r),l={},f=0;while(u.length>f)n=a(r,t=u[f++]),void 0!==n&&s(l,t,n);return l}})},e439:function(e,t,n){var r=n("23e7"),a=n("d039"),i=n("fc6a"),c=n("06cf").f,o=n("83ab"),s=a((function(){c(1)})),u=!o||s;r({target:"Object",stat:!0,forced:u,sham:!o},{getOwnPropertyDescriptor:function(e,t){return c(i(e),t)}})},f564:function(e,t,n){"use strict";var r=n("c31d"),a=n("2b0e"),i=n("2638"),c=n.n(i),o=n("d282"),s=n("ba31"),u=n("6605"),l=n("e41f"),f=Object(o["a"])("notify"),d=f[0],h=f[1];function p(e,t,n,r){var a={color:t.color,background:t.background};return e(l["a"],c()([{attrs:{value:t.value,position:"top",overlay:!1,duration:.2,lockScroll:!1},style:a,class:[h([t.type]),t.className]},Object(s["b"])(r,!0)]),[(null==n.default?void 0:n.default())||t.message])}p.props=Object(r["a"])({},u["b"],{color:String,message:[Number,String],duration:[Number,String],className:null,background:String,getContainer:[String,Function],type:{type:String,default:"danger"}});var m,b,v=d(p),g=n("a142");function w(e){return Object(g["e"])(e)?e:{message:e}}function y(e){if(!g["g"])return b||(b=Object(s["c"])(v,{on:{click:function(e){b.onClick&&b.onClick(e)},close:function(){b.onClose&&b.onClose()},opened:function(){b.onOpened&&b.onOpened()}}})),e=Object(r["a"])({},y.currentOptions,w(e)),Object(r["a"])(b,e),clearTimeout(m),e.duration&&e.duration>0&&(m=setTimeout(y.clear,e.duration)),b}function O(){return{type:"danger",value:!0,message:"",color:void 0,background:void 0,duration:3e3,className:"",onClose:null,onClick:null,onOpened:null}}y.clear=function(){b&&(b.value=!1)},y.currentOptions=O(),y.setDefaultOptions=function(e){Object(r["a"])(y.currentOptions,e)},y.resetDefaultOptions=function(){y.currentOptions=O()},y.install=function(){a["a"].use(v)},y.Component=v,a["a"].prototype.$notify=y;t["a"]=y}}]);
//# sourceMappingURL=Home.8d6668cb.js.map